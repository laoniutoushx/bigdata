# 一、Hive

## 简介

### 概念

-    从概念上讲：由Facebook开源的一款基于hadoop的用于统计海量结构化数据的一个数据仓库。
-   从本质上讲：将HQL语句转换成MapReduce程序的一个工具。

Hive：**数据仓库**

- 数据不可修改
- 容纳不同数据源数据，且可以保留历史版本（时间拉链表、面向主题）
- 只做分析，尽快返回结果

Hive：解释器，编译器，优化器等

Hive：运行时，元数据存储在关系型数据库里面

### 产生：

- 让了方便非java开发人员对hdfs上的数据做 MapReduce 操作

## 架构

1. 从客户端编辑 sql 语句提交到服务端，通过解释器，编译器，优化器生成执行计划，然后提交到 Hadoop 集群运行

>  其中计划执行的最小单元是一个个 operator，每个operator代表一个操作或者一个MR作业



1. Hive的元数据依赖于[关系型数据库](https://cloud.tencent.com/product/cdb-overview?from=10680)，其真实数据是存在于Hadoop之上的

2.  下图为 Hive 架构简图

   ![img](Hive.assets/12214135-7d3ca3b807ad82e8) 

   **内部表** (Table 将数据保存到Hive 自己的数据仓库目录中：/usr/hive/warehouse)

   **外部表** (External Table 相对于内部表，数据不在自己的数据仓库中，只保存数据的元信息)

   **分区表** (Partition Table将数据按照设定的条件分开存储，提高查询效率，分区-----> 目录)

   **桶表** (Bucket Table本质上也是一种分区表，类似 hash 分区 桶 ----> 文件)

   **视图表** (视图表是一个虚表，不存储数据，用来简化复杂的查询)

```undefined
注意:内部表删除表后数据也会删除，外部表数据删除后不会从hdfs中删除
```



OLTP	联机事务数据分析

OLAP	联机数据仓库分析

​	上卷、下钻、旋转、切块、切片

